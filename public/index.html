<!DOCTYPE html>
<html>
	<head>
		<style>
			html {
				height: 100vh;
			}
			body {
				background: #515151;				
				background-image: linear-gradient(top, rgb(81,81,81) 30px, rgb(0,0,0) 130px);
				background-image: -moz-linear-gradient(top, rgb(81,81,81) 30px, rgb(0,0,0) 130px);
				background-image: -webkit-linear-gradient(top, rgb(81,81,81) 30px, rgb(0,0,0) 130px);
				background-image: -ms-linear-gradient(top, rgb(81,81,81) 30px, rgb(0,0,0) 130px);
				color: #fff;
				font-family: Verdana;
				min-width: 800px;
				margin: 5px 5px 0 5px;
				overflow: hidden;
				-moz-user-select: none;
				-webkit-user-select: none;
			}

			h4 {
				font-size: 13px;				
			}

			#top-control {
				margin-bottom: 10px;
				position: relative;
			}

			/* grey container */
			#top-control {
				border-radius: 5px;
				border-top: 2px solid #1A1A1A;
				border-left: 2px solid #1A1A1A;
				border-bottom: 2px solid #2D2C2C;
				border-right: 2px solid #2D2C2C;

				background: #000;
				height: 80px;
				background-image: linear-gradient(bottom, rgb(37,37,37) 5%, rgb(81,81,81) 95%);
				background-image: -moz-linear-gradient(bottom, rgb(37,37,37) 5%, rgb(81,81,81) 95%);
				background-image: -webkit-linear-gradient(bottom, rgb(37,37,37) 5%, rgb(81,81,81) 95%);
				background-image: -ms-linear-gradient(bottom, rgb(37,37,37) 5%, rgb(81,81,81) 95%);
			}

			/* blue container */
			#zone-container h4,
			#status-container h4,
			#music-sources-container h4 {
				background-image: linear-gradient(bottom, bottom, #001C38 10%, #002C4D 60%);
				background-image: -moz-linear-gradient(bottom, #001C38 10%, #002C4D 60%);
				background-image: -webkit-linear-gradient(bottom, #001C38 10%, #002C4D 60%);
				background-image: -ms-linear-gradient(bottom, #001C38 10%, #002C4D 60%);

				color: #0A97FF;		

			}

			/* rounded containers */ 
			#top-control,
			#zone-container,
			#status-container,
			#music-sources-container
			{
				border-radius: 5px;
			}

			#column-container {
				text-align: justify;

			}
			
			#zone-container,
			#status-container,
			#music-sources-container {
				width: calc((100vw - 22px) / 3);
				width: -webkit-calc((100% - 22px) / 3);
				display: inline-block;
				height: calc(100vh - 105px);
				height: -webkit-calc(100% - 105px);
				background: #021B2E;
				vertical-align: top;
				overflow: hidden;				
			}

			#zone-container h4,
			#status-container h4,
			#music-sources-container h4 {
				padding: 10px;
				margin: 0;
				border-bottom: 1px solid #000000;
				border-radius: 5px 5px 0 0;
			}

			#zone-wrapper {
				border-top: #012947 solid 1px;
			}

			#music-sources-container {
				background-image: -moz-radial-gradient(right bottom , #043B63 11%, #021B2E 30%);
				background-image: -webkit-radial-gradient(right bottom , #043B63 11%, #021B2E 30%);
				background-image: radial-gradient(right bottom , #043B63 11%, #021B2E 30%);
				position: relative;
			}

			#music-sources-container .bloom {
				position: absolute;
				right: 0;
				bottom: 0;
				opacity: 0.15;
			}

			#master-volume {
				width: 180px;
				height: 21px;
				top: 28px;
				left: 50px;
				border-radius: 15px;
				border: 1px inset #454545;
				position: absolute;

				background-image: -moz-linear-gradient(bottom, rgb(81,81,81) 5%, rgb(37,37,37) 95%);
				background-image: -webkit-linear-gradient(bottom, rgb(81,81,81) 5%, rgb(37,37,37) 95%);

			}
			#master-volume img {
				margin: -1px 1px;
			}

			#master-mute {
				position: absolute;
				top: 24px;
				left: 10px;
			}

			#controls {
				height: 44px;
				width: 124px;
				margin: 7px auto 0;
			}

			#position-info {
				height: 22px;
				width: 440px;
				margin: 7px auto 0 auto;
				position: relative;
			}

			#position-info .left {
				position: absolute;
				left: 0;
			}

			#position-info .right {
				position: absolute;
				right: 0;
			}

			#position-info .content {
				margin: 0px 38px 0 38px;
				height: 22px;
				background-image: url(images/tc_progress_container_center.png);
				font-size: 11px;
			}

			#position-info .content span,
			#position-info .content img,
			#position-info .content div {
				display: inline-block;
				vertical-align: middle;
			}

			#position-info .content #countup {
				margin-left: 26px;
			}

			#position-info .content #countdown {
				margin-right: 26px;
			}

			#progress-bar-scrubber {
				margin-top: -13px;
			}

			#position-bar {
				height: 4px;
				width: 150px;
				border-radius: 3px;				
				border: 1px inset #252525;
				background-image: -moz-linear-gradient(bottom, rgb(81,81,81) 5%, rgb(37,37,37) 95%);
				background-image: -webkit-linear-gradient(bottom, rgb(81,81,81) 5%, rgb(37,37,37) 95%);
			}

			ul.zone {
				background: #0A4069;
				background-image: -moz-linear-gradient(bottom, #05375F 80%, #084E86 95%);
				background-image: -webkit-linear-gradient(bottom, #05375F 80%, #084E86 95%);
				margin: 10px;
				padding: 10px 10px 10px 46px;
				border-radius: 5px;
				border-top: 1px solid #086EAA;
				border-right: 1px solid #003F6C;
				border-left: 1px solid #02375E;
				border-bottom: 1px solid #01365D;
				position: relative;
			}

			ul.zone:hover,
			ul.zone.selected {
				background: #0A4069;
				background-image: -moz-linear-gradient(bottom, #0E568D 80%, #096EB7 95%);
				background-image: -webkit-linear-gradient(bottom, #0E568D 80%, #096EB7 95%);			
			}

			ul.zone button {
				position: absolute;	
				right: 10px;
				padding: 3px 10px 4px; 
				background-image: -moz-linear-gradient(bottom, #05375F 5%, #084E86 95%);
				background-image: -webkit-linear-gradient(bottom, #05375F 5%, #084E86 95%);
				color: #fff;
				border-radius: 4px;
				border: 1px solid #023E5F;
				text-shadow: 0 -1px 0 #000;
			}

			ul.zone button:active {
				border: 1px inset #023E5F;
				background-image: -moz-linear-gradient(bottom, #084E86 5%, #05375F 95%);
				background-image: -webkit-linear-gradient(bottom, #05375F 5%, #084E86 95%);			
			}

			ul.zone li {
				list-style: url(images/wdcr_zm_ic_bedroom.png);	
			}

			ul.zone span {
				vertical-align: super;
				font-size: 14px;
			}


		</style>
		<script src="/socket.io/socket.io.js"></script>
		<script>
		  var socket = io.connect('/');		  
		</script>		
	</head>
<body>
	<header id="top-control">
		<div id="master-mute">
			<img src="images/tc_vol_speakers_normal.png" />
		</div>
		<div id="master-volume" /><img src="images/popover_vol_scrubber_normal.png" /></div>
		<div id="controls">
			<img src="images/tc_now_playing_rwd_normal.png" />
			<img id="play-pause" src="images/play_normal.png" />
			<img src="images/tc_now_playing_fwd_normal.png" />

		</div>
		<div id="position-info">
			<img class="left" src="images/tc_progress_container_left.png" />
			<img class="right" src="images/tc_progress_container_right.png" />
			<div class="content">
				<img src="images/tc_progress_repeat_normal_off.png" />
				<img src="images/tc_progress_shuffle_normal_off.png" />
				
				<span id="countup">0:00</span>
					<div id="position-info-control">
						<div id="position-bar">
							<img id="progress-bar-scrubber" src="images/tc_progressbar_scrubber_normal.png" />
						</div>				
					</div>
				<span id="countdown">0:00</span>
				
				<img src="images/tc_progress_crossfade_normal_off.png" />
				<img src="images/tc_progress_equalizer_normal.png" />
			</div>
			
		</div>
	</header>
	<div id="column-container">
		<div id="zone-container">
			<h4>ROOMS</h4>
			<div id="zone-wrapper"></div>
		</div>
		<div id="status-container">
			<h4>NOW PLAYING</h4>

			<h4>QUEUE</h4>

		</div>
		<div id="music-sources-container">
			<h4>Select a music source</h4>
			<img class="bloom" src="images/s_bloom.png" />			
		</div>
	</div>

	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
	<script src="jquery.extensions.js"></script>
	<script>
		$('#play-pause').on('click', function () {
			
			var action; 
			// Find state of current player
			if (/play/.test(this.src)) {
				// Is play state, switch to pause
				this.src = this.src.replace('play', 'pause');
				action = 'pause';
			} else {
				// Is play state, switch to pause
				this.src = this.src.replace('pause', 'play');
				action = 'play';
			}

			socket.emit('transport-state', { uuid: currentState.selectedZone, state: action });
		});

		var currentState = {
			selectedZone: null,
			masterVolume: 0,
			setMasterVolume: function (volume) {

			},

		};

		socket.on('topology-change', function (data) {
		    $('#zone-container').reRenderZones(data);	    	    
		});

		$('#zone-container').on('click', 'ul', function () {
			currentState.selectedZone = this.uuid;
			var zone = $(this);
			console.log(zone)
			zone.addClass('selected');
			zone.siblings().removeClass('selected');

			
			console.log(this.uuid);
		});
		$('#master-volume').volumeSlider();

	</script>
</body>
</html>